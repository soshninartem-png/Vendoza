{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product.name }}</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --blue:       #2563eb;
            --blue-hover: #1d4ed8;
            --blue-light: #eff6ff;
            --blue-badge: #dbeafe;
            --yellow:     #fbbf24;
            --text:       #111827;
            --text-muted: #6b7280;
            --border:     #e5e7eb;
            --bg:         #f9fafb;
            --white:      #ffffff;
            --success:    #10b981;
            --red:        #ef4444;
            --shadow:     rgba(0,0,0,0.08);
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1320px;
            margin: 0 auto;
            padding: 24px;
        }

        /* BREADCRUMBS */
        .breadcrumbs {
            display: flex;
            gap: 8px;
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 24px;
            flex-wrap: wrap;
            align-items: center;
        }
        .breadcrumbs a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color .2s;
        }
        .breadcrumbs a:hover { color: var(--blue); }

        /* MAIN LAYOUT */
        .product-layout {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--white);
            border-radius: 16px;
            padding: 22px;
            box-shadow: 0 2px 10px var(--shadow);
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            transition: box-shadow .3s, transform .3s;
        }
        .card:hover {
            box-shadow: 0 8px 28px rgba(0,0,0,0.12);
            transform: translateY(-3px);
        }

        /* IMAGE */
        .image-card { position: relative; }
        .image-container {
            width: 100%;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg);
            border-radius: 12px;
            overflow: hidden;
        }
        .product-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: transform .5s ease;
        }
        .image-container:hover .product-image { transform: scale(1.06); }

        .badge-sale {
            position: absolute;
            top: 22px; left: 22px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            padding: 7px 14px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            box-shadow: 0 4px 12px rgba(239,68,68,.3);
            z-index: 1;
        }

        /* INFO CARD */
        .rating-section {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }
        .stars { color: var(--yellow); font-size: 16px; letter-spacing: 2px; }
        .rating-text { font-weight: 700; font-size: 15px; }
        .rating-link {
            color: var(--blue);
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            transition: color .2s;
        }
        .rating-link:hover { text-decoration: underline; }

        .section-title { font-size: 18px; font-weight: 700; margin-bottom: 12px; }
        .description-text { color: #374151; line-height: 1.75; font-size: 14px; flex: 1; }

        /* PRICE */
        .price-section { margin-bottom: 18px; }
        .price-current {
            font-size: 36px;
            font-weight: 800;
            color: var(--blue);
            line-height: 1;
            letter-spacing: -.02em;
        }
        .price-old {
            font-size: 15px;
            color: var(--text-muted);
            text-decoration: line-through;
            margin-top: 5px;
        }

        /* INSTALLMENT */
        .installment-card {
            background: linear-gradient(135deg, var(--blue-light), var(--blue-badge));
            border-radius: 14px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid #bfdbfe;
        }
        .installment-tabs {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-bottom: 12px;
        }
        .tab {
            padding: 9px 4px;
            border: none;
            background: rgba(255,255,255,.6);
            border-radius: 9px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all .2s;
            text-align: center;
            color: var(--text-muted);
            font-family: inherit;
        }
        .tab:hover { background: rgba(255,255,255,.8); }
        .tab.active {
            background: white;
            color: var(--blue);
            box-shadow: 0 2px 8px rgba(37,99,235,.2);
            transform: translateY(-1px);
        }
        .installment-info { text-align: center; }
        .installment-price { font-size: 26px; font-weight: 800; color: var(--blue); }
        .installment-term { font-size: 12px; color: var(--text-muted); margin-top: 4px; }

        /* DELIVERY */
        .delivery-options { margin-bottom: 14px; }
        .delivery-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 11px 13px;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all .2s;
            margin-bottom: 8px;
        }
        .delivery-option:hover { border-color: var(--blue); background: var(--blue-light); }
        .delivery-option.active { border-color: var(--blue); background: var(--blue-light); }
        .delivery-radio {
            width: 20px; height: 20px;
            border-radius: 50%;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: border-color .2s;
            position: relative;
        }
        .delivery-option.active .delivery-radio { border-color: var(--blue); }
        .delivery-radio::after {
            content: '';
            width: 10px; height: 10px;
            border-radius: 50%;
            background: var(--blue);
            opacity: 0;
            transition: opacity .2s;
            position: absolute;
        }
        .delivery-option.active .delivery-radio::after { opacity: 1; }
        .delivery-info { flex: 1; }
        .delivery-title { font-weight: 600; font-size: 14px; }
        .delivery-desc { font-size: 12px; color: var(--text-muted); }
        .delivery-price { font-weight: 700; font-size: 14px; color: var(--blue); }

        /* TOTAL */
        .total-price {
            padding: 14px;
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 10px;
            margin-bottom: 16px;
            border: 1px solid #fcd34d;
        }
        .total-label { font-size: 12px; color: var(--text-muted); margin-bottom: 3px; }
        .total-amount { font-size: 28px; font-weight: 800; color: var(--text); }

        /* BUTTONS */
        .action-row { display: flex; gap: 10px; margin-bottom: 14px; align-items: stretch; }
        .btn {
            padding: 13px 18px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all .3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-family: inherit;
            text-decoration: none;
        }
        .btn-primary {
            background: var(--blue);
            color: white;
            box-shadow: 0 4px 14px rgba(37,99,235,.3);
            flex: 1;
        }
        .btn-primary:hover {
            background: var(--blue-hover);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(37,99,235,.4);
        }
        .btn-primary.added { background: var(--success); box-shadow: 0 4px 14px rgba(16,185,129,.3); }
        .btn-primary:disabled { opacity: .85; cursor: default; transform: none !important; }

        .btn-wishlist {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: white;
            border: 2px solid var(--border);
            font-size: 22px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all .25s;
            flex-shrink: 0;
            color: var(--text-muted);
        }
        .btn-wishlist:hover { border-color: var(--red); color: var(--red); background: #fef2f2; }
        .btn-wishlist.in-wishlist { border-color: var(--red); color: var(--red); background: #fef2f2; }

        /* INFO BOX */
        .info-box {
            padding: 12px;
            background: var(--bg);
            border-radius: 10px;
            margin-bottom: 10px;
            font-size: 13px;
            border: 1px solid var(--border);
        }
        .info-box-title {
            font-weight: 700;
            color: var(--text);
            margin-bottom: 3px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .info-box-text { color: var(--text-muted); }

        /* TOAST */
        .toast {
            position: fixed;
            bottom: 28px; right: 28px;
            background: #1a1a1a;
            color: white;
            padding: 14px 20px;
            border-radius: 14px;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,.22);
            z-index: 9999;
            transform: translateY(90px);
            opacity: 0;
            transition: transform .4s cubic-bezier(.34,1.56,.64,1), opacity .3s;
            pointer-events: none;
            max-width: 320px;
        }
        .toast.show { transform: translateY(0); opacity: 1; }
        .toast-icon {
            width: 30px; height: 30px;
            border-radius: 50%;
            background: var(--success);
            display: flex; align-items: center; justify-content: center;
            font-size: .85rem; flex-shrink: 0;
        }

        /* FULL WIDTH SECTIONS */
        .full-width-section {
            background: var(--white);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px var(--shadow);
            border: 1px solid var(--border);
        }
        .section-header { font-size: 20px; font-weight: 700; margin-bottom: 20px; }

        /* REVIEWS */
        .review-card {
            border-bottom: 1px solid var(--border);
            padding: 16px 0;
            transition: all .2s;
        }
        .review-card:last-child { border-bottom: none; }
        .review-card:hover {
            background: var(--bg);
            padding: 16px;
            margin: 0 -16px;
            border-radius: 12px;
        }
        .review-header { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .reviewer-name { font-weight: 600; font-size: 14px; margin-bottom: 4px; }
        .review-date { color: var(--text-muted); font-size: 12px; }
        .review-text { color: #374151; line-height: 1.6; font-size: 13px; }
        .no-reviews { color: var(--text-muted); text-align: center; padding: 28px 20px; font-size: 14px; }

        /* REVIEW FORM */
        .comment-form {
            background: var(--bg);
            padding: 22px;
            border-radius: 14px;
            margin-top: 24px;
            border: 1px solid var(--border);
        }
        .comment-form h3 { font-size: 17px; font-weight: 700; margin-bottom: 18px; }
        .form-group { margin-bottom: 16px; }
        .form-label { display: block; font-weight: 600; font-size: 13px; margin-bottom: 7px; }
        .form-input, .form-textarea {
            width: 100%;
            padding: 12px 14px;
            border: 1.5px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
            transition: all .2s;
            background: white;
        }
        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(37,99,235,.1);
        }
        .form-textarea { resize: vertical; min-height: 100px; }

        .rating-input { display: flex; gap: 6px; font-size: 30px; }
        .star-btn {
            background: none; border: none;
            cursor: pointer; color: #d1d5db;
            transition: all .2s; padding: 0; line-height: 1;
        }
        .star-btn:hover, .star-btn.active { color: var(--yellow); transform: scale(1.15); }

        .btn-submit {
            background: var(--blue);
            color: white;
            padding: 12px 32px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all .2s;
            font-family: inherit;
        }
        .btn-submit:hover {
            background: var(--blue-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 14px rgba(37,99,235,.3);
        }

        /* RESPONSIVE */
        @media (max-width: 1024px) { .product-layout { grid-template-columns: 1fr; } }
        @media (max-width: 768px) {
            .container { padding: 14px; }
            .installment-tabs { grid-template-columns: repeat(2,1fr); }
            .full-width-section { padding: 18px; }
        }
    </style>
</head>
<body>

<!-- TOAST -->
<div class="toast" id="toast">
    <div class="toast-icon">‚úì</div>
    <span id="toastText"></span>
</div>

<div class="container">

    <!-- BREADCRUMBS -->
    <div class="breadcrumbs">
        <a href="{% url 'shop:home' %}">–ì–ª–∞–≤–Ω–∞—è</a>
        <span>‚Ä∫</span>
        {% if product.category %}
        <a href="{% url 'shop:category' product.category.slug %}">{{ product.category.name }}</a>
        <span>‚Ä∫</span>
        {% endif %}
        <span>{{ product.name }}</span>
    </div>

    <!-- MAIN LAYOUT -->
    <div class="product-layout">

        <!-- COLUMN 1: IMAGE -->
        <div class="card image-card">
            <div class="image-container">
                {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
                {% else %}
                    <img src="https://placehold.co/500x500/eff6ff/2563eb?text={{ product.name|urlencode }}" alt="{{ product.name }}" class="product-image">
                {% endif %}
            </div>
        </div>

        <!-- COLUMN 2: INFO -->
        <div class="card info-card">
            <div class="rating-section">
                <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                <span class="rating-text">4.8</span>
                <a href="#reviews" class="rating-link">–°–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã</a>
            </div>

            <h1 class="section-title">{{ product.name }}</h1>
            <p class="description-text">{{ product.description|default:"–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç." }}</p>

            {% if product.unit_type or product.category %}
            <div style="margin-top:16px;display:flex;gap:8px;flex-wrap:wrap;">
                {% if product.unit_type %}
                <span style="background:var(--blue-light);color:var(--blue);padding:5px 12px;border-radius:20px;font-size:12px;font-weight:700;">
                    {{ product.get_unit_type_display }}
                </span>
                {% endif %}
                {% if product.category %}
                <span style="background:var(--bg);color:var(--text-muted);padding:5px 12px;border-radius:20px;font-size:12px;font-weight:600;border:1px solid var(--border);">
                    {{ product.category.name }}
                </span>
                {% endif %}
            </div>
            {% endif %}
        </div>

        <!-- COLUMN 3: PRICE & ACTIONS -->
        <div class="card">

            <!-- Price -->
            <div class="price-section">
                <div class="price-current">${{ product.price }}</div>
            </div>

            <!-- Installment -->
            <div class="installment-card">
                <div class="installment-tabs">
                    <button class="tab" data-months="3">3 –º–µ—Å</button>
                    <button class="tab" data-months="6">6 –º–µ—Å</button>
                    <button class="tab" data-months="12">12 –º–µ—Å</button>
                    <button class="tab active" data-months="24">24 –º–µ—Å</button>
                </div>
                <div class="installment-info">
                    <div class="installment-price" id="monthlyPrice">‚Äì</div>
                    <div class="installment-term" id="monthlyTerm">√ó 24 –º–µ—Å</div>
                </div>
            </div>

            <!-- Delivery -->
            <div class="delivery-options">
                <div class="delivery-option active" data-price="0">
                    <div class="delivery-radio"></div>
                    <div class="delivery-info">
                        <div class="delivery-title">üè™ –°–∞–º–æ–≤—ã–≤–æ–∑</div>
                        <div class="delivery-desc">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ, —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    <div class="delivery-price">0 $</div>
                </div>
                <div class="delivery-option" data-price="10">
                    <div class="delivery-radio"></div>
                    <div class="delivery-info">
                        <div class="delivery-title">üöö –î–æ—Å—Ç–∞–≤–∫–∞</div>
                        <div class="delivery-desc">1‚Äì3 –¥–Ω—è –ø–æ –≥–æ—Ä–æ–¥—É</div>
                    </div>
                    <div class="delivery-price">+10 $</div>
                </div>
            </div>

            <!-- Total -->
            <div class="total-price">
                <div class="total-label">–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</div>
                <div class="total-amount" id="totalPrice">${{ product.price }}</div>
            </div>

            <!-- Action buttons -->
            <div class="action-row">

                <!-- Add to Cart -->
                <form method="POST" action="{% url 'shop:cart' %}" id="cartForm" style="flex:1;display:flex;">
                    {% csrf_token %}
                    <input type="hidden" name="product_id" value="{{ product.id }}">
                    <button type="submit" class="btn btn-primary" id="addToCartBtn" style="width:100%;">
                        üõí –í –∫–æ—Ä–∑–∏–Ω—É
                    </button>
                </form>

                <!-- Wishlist -->
                <form method="POST" action="{% url 'shop:wishlist' %}" id="wishlistForm">
                    {% csrf_token %}
                    <input type="hidden" name="product_id" value="{{ product.id }}">
                    <button type="submit" class="btn-wishlist {% if in_wishlist %}in-wishlist{% endif %}" id="wishlistBtn" title="–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                        {% if in_wishlist %}‚ô•{% else %}‚ô°{% endif %}
                    </button>
                </form>

            </div>

            <!-- Info boxes -->
            <div class="info-box">
                <div class="info-box-title"><span>üíµ</span><span>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</span></div>
                <div class="info-box-text">–ù–∞–ª–∏—á–Ω—ã–º–∏ –∏–ª–∏ –∫–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</div>
            </div>
            <div class="info-box">
                <div class="info-box-title"><span>üîÑ</span><span>–í–æ–∑–≤—Ä–∞—Ç</span></div>
                <div class="info-box-text">–í–æ–∑–≤—Ä–∞—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π</div>
            </div>

        </div>
    </div>

    <!-- REVIEWS -->
    <div class="full-width-section" id="reviews">
        <h2 class="section-header">–û—Ç–∑—ã–≤—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</h2>

        <div id="reviewsList">
            {% if product.reviews.all %}
                {% for review in product.reviews.all %}
                <div class="review-card">
                    <div class="review-header">
                        <div>
                            <div class="reviewer-name">{{ review.user_name }}</div>
                            <div class="stars" style="font-size:13px;">
                                {% for i in "12345" %}
                                    {% if forloop.counter <= review.rating %}‚òÖ{% else %}‚òÜ{% endif %}
                                {% endfor %}
                            </div>
                        </div>
                        <div class="review-date">{{ review.created_at|date:"d M Y" }}</div>
                    </div>
                    <div class="review-text">{{ review.comment }}</div>
                </div>
                {% endfor %}
            {% else %}
                <p class="no-reviews">üòä –ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
            {% endif %}
        </div>

        <!-- Comment form -->
        <div class="comment-form">
            <h3>–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h3>
            <form id="reviewForm">
                <div class="form-group">
                    <label class="form-label">–í–∞—à–µ –∏–º—è</label>
                    <input type="text" class="form-input" id="userName" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–û—Ü–µ–Ω–∫–∞</label>
                    <div class="rating-input" id="ratingInput">
                        <button type="button" class="star-btn" data-rating="1">‚òÖ</button>
                        <button type="button" class="star-btn" data-rating="2">‚òÖ</button>
                        <button type="button" class="star-btn" data-rating="3">‚òÖ</button>
                        <button type="button" class="star-btn" data-rating="4">‚òÖ</button>
                        <button type="button" class="star-btn" data-rating="5">‚òÖ</button>
                    </div>
                    <input type="hidden" id="ratingValue" value="5">
                </div>
                <div class="form-group">
                    <label class="form-label">–í–∞—à –æ—Ç–∑—ã–≤</label>
                    <textarea class="form-textarea" id="reviewText" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ—ë–º –æ–ø—ã—Ç–µ" required></textarea>
                </div>
                <button type="submit" class="btn-submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
            </form>
        </div>
    </div>

</div>

<script>
    const basePrice = {{ product.price|default:0 }};
    let deliveryPrice = 0;

    /* DELIVERY */
    document.querySelectorAll('.delivery-option').forEach(opt => {
        opt.addEventListener('click', function () {
            document.querySelectorAll('.delivery-option').forEach(o => o.classList.remove('active'));
            this.classList.add('active');
            deliveryPrice = parseFloat(this.dataset.price);
            updateTotal();
        });
    });

    function updateTotal() {
        const total = basePrice + deliveryPrice;
        document.getElementById('totalPrice').textContent = '$' + total.toFixed(2).replace(/\.00$/, '');
    }

    /* INSTALLMENT */
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function () {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            const months = parseInt(this.dataset.months);
            document.getElementById('monthlyPrice').textContent = '$' + Math.ceil(basePrice / months);
            document.getElementById('monthlyTerm').textContent = '√ó ' + months + ' –º–µ—Å';
        });
    });
    // Init
    document.getElementById('monthlyPrice').textContent = '$' + Math.ceil(basePrice / 24);

    /* ADD TO CART */
    document.getElementById('cartForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const btn = document.getElementById('addToCartBtn');
        const orig = btn.innerHTML;
        btn.classList.add('added');
        btn.innerHTML = '‚úì –î–æ–±–∞–≤–ª–µ–Ω–æ!';
        btn.disabled = true;
        showToast('{{ product.name|escapejs }} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!');
        setTimeout(() => {
            btn.classList.remove('added');
            btn.innerHTML = orig;
            btn.disabled = false;
        }, 2200);
        this.submit();
    });

    /* WISHLIST */
    document.getElementById('wishlistForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const btn = document.getElementById('wishlistBtn');
        const isIn = btn.classList.contains('in-wishlist');
        btn.classList.toggle('in-wishlist');
        btn.innerHTML = isIn ? '‚ô°' : '‚ô•';
        showToast(isIn ? '–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ' : '–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ! ‚ô•');
        this.submit();
    });

    /* TOAST */
    function showToast(msg) {
        const t = document.getElementById('toast');
        document.getElementById('toastText').textContent = msg;
        t.classList.add('show');
        clearTimeout(t._t);
        t._t = setTimeout(() => t.classList.remove('show'), 3000);
    }

    /* STARS */
    const starBtns = document.querySelectorAll('.star-btn');
    starBtns.forEach(btn => {
        btn.addEventListener('click', function () {
            const r = parseInt(this.dataset.rating);
            document.getElementById('ratingValue').value = r;
            starBtns.forEach((s, i) => s.classList.toggle('active', i < r));
        });
        btn.addEventListener('mouseenter', function () {
            const r = parseInt(this.dataset.rating);
            starBtns.forEach((s, i) => s.style.color = i < r ? '#fbbf24' : '');
        });
        btn.addEventListener('mouseleave', () => {
            starBtns.forEach(s => s.style.color = '');
        });
    });
    starBtns.forEach(s => s.classList.add('active'));

    /* REVIEW FORM */
    document.getElementById('reviewForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const name = document.getElementById('userName').value.trim();
        const rating = parseInt(document.getElementById('ratingValue').value);
        const text = document.getElementById('reviewText').value.trim();
        if (!name || !text) return;

        const stars = '‚òÖ'.repeat(rating) + '‚òÜ'.repeat(5 - rating);
        const date = new Date().toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' });

        const card = document.createElement('div');
        card.className = 'review-card';
        card.innerHTML = `
            <div class="review-header">
                <div>
                    <div class="reviewer-name">${name}</div>
                    <div class="stars" style="font-size:13px;">${stars}</div>
                </div>
                <div class="review-date">${date}</div>
            </div>
            <div class="review-text">${text}</div>
        `;

        const list = document.getElementById('reviewsList');
        const noMsg = list.querySelector('.no-reviews');
        if (noMsg) noMsg.remove();
        list.insertBefore(card, list.firstChild);

        this.reset();
        starBtns.forEach(s => s.classList.add('active'));
        document.getElementById('ratingValue').value = 5;
        showToast('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤! ‚≠ê');
    });
</script>




<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-grid">

      <!-- BRAND -->
      <div class="footer-col">
        <h1 class="footer-logo">Vendoza</h1>
        <p class="footer-desc">
          Modern marketplace with quality products and fast delivery.
        </p>

        <div class="social-links">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
      </div>

      <!-- COMPANY -->
      <div class="footer-col">
        <h5>Company</h5>
        <ul>
          <li><a href="#">About us</a></li>
          <li><a href="#">Conditions</a></li>
          <li><a href="#">Careers</a></li>
          <li><a href="#">Press</a></li>
        </ul>
      </div>

      <!-- QUICK LINKS -->
      <div class="footer-col">
        <h5>Quick Links</h5>
        <ul>
          <li><a href="#">Offers</a></li>
          <li><a href="#">Coupons</a></li>
          <li><a href="#">Stores</a></li>
          <li><a href="#">Track Order</a></li>
        </ul>
      </div>

      <!-- SUPPORT -->
      <div class="footer-col">
        <h5>Support</h5>
        <ul>
          <li><a href="#">FAQ</a></li>
          <li><a href="#">Contact</a></li>
          <li><a href="#">Privacy Policy</a></li>
          <li><a href="#">Returns</a></li>
        </ul>
      </div>

      <!-- SUBSCRIBE -->
      <div class="footer-col">
        <h5>Subscribe</h5>
        <p class="footer-desc">Get updates and special offers</p>
        <form class="subscribe-form">
          <input type="email" placeholder="Email address">
          <button type="submit">Subscribe</button>
        </form>
      </div>

    </div>

    <div class="footer-bottom">
      ¬© {{ year|default:"2026" }} Vendoza ‚Äî All rights reserved
    </div>
  </div>
</footer>

  <div id="footer-bottom">
    <div class="container-lg">
      <div class="row">
        <div class="col-md-6 copyright">
          <p>¬© 2026 Vendoza. All rights reserved.</p>
        </div>
        <div class="col-md-6 credit-link text-start text-md-end">
          <p>HTML Template by <a href="https://templatesjungle.com/">TemplatesJungle</a> Distributed By <a
              href="https://themewagon.com">ThemeWagon</a> </p>
        </div>
      </div>
    </div>
  </div>
  
  <script src="js/jquery-1.11.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>
</body>
</html>